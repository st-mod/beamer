var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{go:()=>i,up:()=>c,zN:()=>l,t$:()=>a,F2:()=>d,Fv:()=>f,$Z:()=>u,oL:()=>p,u7:()=>m,tR:()=>h,Iz:()=>g,tC:()=>b,XG:()=>v,_i:()=>y,_R:()=>w,mH:()=>E,Wi:()=>I,DT:()=>$,Kl:()=>D});const n=[];let o=0;const r=[];let s=-1;function i(t){o!==t&&(r[++s]=o=t,r[s+1]=void 0),n[o].scrollIntoView()}function c(){i((o-1+n.length)%n.length)}function l(){i((o+1)%n.length)}function a(){let t=r[s-1];void 0!==t&&(o=t,s--,n[o].scrollIntoView())}function d(){let t=r[s+1];void 0!==t&&(o=t,s++,n[o].scrollIntoView())}function f(){for(let t=0;t<n.length;t++){const{bottom:e}=n[t].getBoundingClientRect();if(e>0){i(t);break}}}function u(){for(let t=0;t<n.length;t++){const{top:e,height:o}=n[t].getBoundingClientRect();if(e+o/2>=0){i(t),document.documentElement.classList.add("showing");break}}}function p(){addEventListener("keydown",(t=>{if(0!==n.length)if("Enter"!==t.key){if(document.documentElement.classList.contains("showing")){if("Escape"!==t.key)return"ArrowUp"===t.key||"PageUp"===t.key?(t.preventDefault(),void c()):"ArrowDown"===t.key||"PageDown"===t.key?(t.preventDefault(),void l()):"ArrowLeft"===t.key?(t.preventDefault(),void a()):"ArrowRight"===t.key?(t.preventDefault(),void d()):void 0;document.documentElement.classList.remove("showing")}}else u()})),addEventListener("scroll",(()=>{document.documentElement.classList.contains("showing")&&f()}))}function m(t,e){for(const n of e)for(const e of n){if("string"==typeof e)continue;if(e.tag===t)return e;for(const n of Object.keys(e.options)){const o=e.options[n];if("object"==typeof o){const e=m(t,o);if(void 0!==e)return e}}const n=m(t,e.children);if(void 0!==n)return n}}function h(t,e){const n=[];for(const o of e)for(const e of o)if("string"!=typeof e){e.tag===t&&n.push(e);for(const o of Object.keys(e.options)){const r=e.options[o];"object"==typeof r&&n.push(...h(t,r))}n.push(...h(t,e.children))}return n}function g(t){return b(t.children)}function b(t){if(0===t.length)return"";let e="";for(const n of t[0])e+="string"!=typeof n?g(n):n;return e}function v(t){const e=[];for(const n of t.trim().split(/\s+/))if(/^\d+-$/.test(n))e[Number(n.slice(0,-1))-1]=!0;else if(/^\d+$/.test(n)){const t=Number(n);e[t-1]=!0,e[t]=void 0}else if(/^\d+-\d+$/.test(n)){const[t,o]=n.split("-",2).map(Number);for(let n=t-1;n<o;n++)e[n]=!0;e[o]=void 0}else if(/^-\d+$/.test(n)){const t=Number(n.slice(1));for(let n=0;n<t;n++)e[n]=!0;e[t]=void 0}return e}function y(t){if(0===t.length)return[];const e=t.map(v),n=Math.max(...e.map((t=>t.length)));if(0===n)return[];for(const t of e)if(t.length<n){const e=t[t.length-1];for(let o=t.length;o<n;o++)t[o]=e}return e}function w(t){const e=[],n=[];for(const[,o,r]of t.matchAll(/((?:\^?-?[_a-zA-Z]+[_a-zA-Z0-9-]*\s+)*)([0-9-][0-9-\s]*)(?:\s+|$)/g))e.push(o),n.push(r);const o=y(n);if(0===o.length)return[];const r=o[0].length,s=[];for(let t=0;t<r;t++)s[t]=[];for(let t=0;t<o.length;t++){const n=o[t],r=e[t],i=[],c=[];for(const t of r.trim().split(/\s+/)){if(0===t.length){c.push("invisible");break}t.startsWith("^")?c.push(t.slice(1)):i.push(t)}for(let t=0;t<n.length;t++)n[t]?s[t].push(...i):s[t].push(...c)}return s.map((t=>t.join(" ")))}function E(t){const e=[];for(const n of t.querySelectorAll("[data-slide]")){const t=n.getAttribute("data-slide");if(null===t)continue;const o=w(t);o.length>0&&e.push({element:n,classArray:o})}return e}let A="",S="",k="",x=0;const I=async(t,e)=>{const o=m("title",t.children);void 0!==o&&(A="string"==typeof o.options.abbr?o.options.abbr:g(o));const r=h("author",t.children);r.length>0&&(S=r.map((t=>"string"==typeof t.options.abbr?t.options.abbr:g(t))).join(", "));const s=m("date",t.children);void 0!==s&&(k="string"==typeof s.options.abbr?s.options.abbr:g(s)),x++;const i=document.createElement("div");for(let o=0;;o++){const r=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=document.createElementNS("http://www.w3.org/2000/svg","foreignObject"),c=document.createElement("div"),l=document.createElement("main"),a=document.createElement("footer"),d=document.createElement("div"),f=document.createElement("div"),u=document.createElement("div"),p=document.createElement("div");i.append(r),r.append(s),s.append(c),c.append(l),c.append(a),l.append(await e.compileSTDN(t.children)),a.append(d),a.append(f),a.append(u),a.append(p),n.push(r),r.setAttribute("viewBox","0 0 1920 1080"),s.setAttribute("width","100%"),s.setAttribute("height","100%"),d.textContent=S,f.textContent=A,u.textContent=k,p.textContent=x.toString();let m=!1;for(const{element:t,classArray:e}of E(l)){o<e.length-1&&(m=!0);const n=e[Math.min(o,e.length-1)];n.length>0&&t.setAttribute("class",(t.getAttribute("class")??"")+" "+n)}if(!m)break}return i},N=["download","href","hreflang","ping","referrerpolicy","rel","target","type"];function $(t){for(const e of t.querySelectorAll("a")){const t=document.createElement("span");for(const{name:n,value:o}of e.attributes)if(!N.includes(n))try{t.setAttribute(n,o)}catch(t){console.log(t)}for(const n of e.childNodes)t.append(n);e.replaceWith(t)}return t}const D=async(t,e)=>{const n=!0===t.options.pause,o=document.createElement("ul");let r=document.createElement("ul");o.append(r);let s=0;for(const t of e.context.indexInfoArray){if("heading"!==t.realOrbit||t.index.length>2)continue;const i=document.createElement("li"),c=document.createElement("a");i.append(c),c.append($(await e.compileSTDN(t.unit.children))),c.href=`#${encodeURIComponent(t.id)}`,2!==t.index.length?(r=document.createElement("ul"),o.append(i),o.append(r),s++,n&&s>1&&(r.dataset.slide=i.dataset.slide=`${s}-`)):r.append(i)}return o};var j=e.zN,C=e.mH,L=e.u7,R=e.tR,z=e.Wi,O=e.go,P=e.t$,T=e.oL,_=e.Fv,U=e.Kl,F=e.XG,W=e._i,Z=e._R,B=e.DT,V=e.F2,q=e.$Z,G=e.tC,H=e.Iz,K=e.up;export{j as down,C as extractSlidableElements,L as findUnit,R as findUnits,z as frame,O as go,P as left,T as listen,_ as normalize,U as outline,F as parseSlideIndexesStr,W as parseSlideIndexesStrs,Z as parseSlideStr,B as replaceAnchors,V as right,q as show,G as stdnToInlinePlainString,H as unitToInlinePlainString,K as up};