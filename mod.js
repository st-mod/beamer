var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{go:()=>r,up:()=>c,zN:()=>l,t$:()=>a,F2:()=>d,Fv:()=>u,$Z:()=>f,oL:()=>p,u7:()=>m,tR:()=>g,Iz:()=>h,tC:()=>v,XG:()=>b,_i:()=>y,_R:()=>w,mH:()=>E,Wi:()=>N,X0:()=>$,Kl:()=>j});const n=[];let o=0;const i=[];let s=-1;function r(t){o!==t&&(i[++s]=o=t,i[s+1]=void 0),n[o].scrollIntoView()}function c(){r((o-1+n.length)%n.length)}function l(){r((o+1)%n.length)}function a(){let t=i[s-1];void 0!==t&&(o=t,s--,n[o].scrollIntoView())}function d(){let t=i[s+1];void 0!==t&&(o=t,s++,n[o].scrollIntoView())}function u(){for(let t=0;t<n.length;t++){const{bottom:e}=n[t].getBoundingClientRect();if(e>0){r(t);break}}}function f(){for(let t=0;t<n.length;t++){const{top:e,height:o}=n[t].getBoundingClientRect();if(e+o/2>=0){r(t),document.documentElement.classList.add("showing");break}}}function p(){addEventListener("keydown",(t=>{if(0!==n.length)if("Enter"!==t.key){if("Escape"!==t.key)return"ArrowUp"===t.key||"PageUp"===t.key?(t.preventDefault(),void c()):"ArrowDown"===t.key||"PageDown"===t.key?(t.preventDefault(),void l()):"ArrowLeft"===t.key?(t.preventDefault(),void a()):"ArrowRight"===t.key?(t.preventDefault(),void d()):void 0;document.documentElement.classList.remove("showing")}else f()})),addEventListener("scroll",(()=>{document.documentElement.classList.contains("showing")&&u()}))}function m(t,e){for(const n of e)for(const e of n){if("string"==typeof e)continue;if(e.tag===t)return e;for(const n of Object.keys(e.options)){const o=e.options[n];if("object"==typeof o){const e=m(t,o);if(void 0!==e)return e}}const n=m(t,e.children);if(void 0!==n)return n}}function g(t,e){const n=[];for(const o of e)for(const e of o)if("string"!=typeof e){e.tag===t&&n.push(e);for(const o of Object.keys(e.options)){const i=e.options[o];"object"==typeof i&&n.push(...g(t,i))}n.push(...g(t,e.children))}return n}function h(t){return v(t.children)}function v(t){if(0===t.length)return"";let e="";for(const n of t[0])e+="string"!=typeof n?h(n):n;return e}function b(t){const e=[];for(const n of t.trim().split(/\s+/))if(/^\d+-$/.test(n))e[Number(n.slice(0,-1))-1]=!0;else if(/^\d+$/.test(n)){const t=Number(n);e[t-1]=!0,e[t]=void 0}else if(/^\d+-\d+$/.test(n)){const[t,o]=n.split("-",2).map(Number);for(let n=t-1;n<o;n++)e[n]=!0;e[o]=void 0}else if(/^-\d+$/.test(n)){const t=Number(n.slice(1));for(let n=0;n<t;n++)e[n]=!0;e[t]=void 0}return e}function y(t){if(0===t.length)return[];const e=t.map(b),n=Math.max(...e.map((t=>t.length)));if(0===n)return[];for(const t of e)if(t.length<n){const e=t[t.length-1];for(let o=t.length;o<n;o++)t[o]=e}return e}function w(t){const e=[],n=[];for(const[,o,i]of t.matchAll(/((?:\^?-?[_a-zA-Z]+[_a-zA-Z0-9-]*\s+)*)([0-9-][0-9-\s]*)(?:\s+|$)/g))e.push(o),n.push(i);const o=y(n);if(0===o.length)return[];const i=o[0].length,s=[];for(let t=0;t<i;t++)s[t]=[];for(let t=0;t<o.length;t++){const n=o[t],i=e[t],r=[],c=[];for(const t of i.trim().split(/\s+/)){if(0===t.length){c.push("invisible");break}t.startsWith("^")?c.push(t.slice(1)):r.push(t)}for(let t=0;t<n.length;t++)n[t]?s[t].push(...r):s[t].push(...c)}return s.map((t=>t.join(" ")))}function E(t){const e=[];for(const n of t.querySelectorAll("[data-slide]")){const t=n.getAttribute("data-slide");if(null===t)continue;const o=w(t);o.length>0&&e.push({element:n,classArray:o})}return e}let k="",A="",S="",x=0;const N=async(t,e)=>{const o=m("title",t.children);void 0!==o&&(k="string"==typeof o.options.abbr?o.options.abbr:h(o));const i=g("author",t.children);i.length>0&&(A=i.map((t=>"string"==typeof t.options.abbr?t.options.abbr:h(t))).join(", "));const s=m("date",t.children);void 0!==s&&(S="string"==typeof s.options.abbr?s.options.abbr:h(s)),x++;const r=document.createElement("div");for(let o=0;;o++){const i=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=document.createElementNS("http://www.w3.org/2000/svg","foreignObject"),c=document.createElement("div"),l=document.createElement("main"),a=document.createElement("footer"),d=document.createElement("div"),u=document.createElement("div"),f=document.createElement("div"),p=document.createElement("div");r.append(i),i.append(s),s.append(c),c.append(l),c.append(a),l.append(await e.compileSTDN(t.children)),a.append(d),a.append(u),a.append(f),a.append(p),n.push(i),i.setAttribute("viewBox","0 0 1920 1080"),s.setAttribute("width","100%"),s.setAttribute("height","100%"),d.textContent=A,u.textContent=k,f.textContent=S,p.textContent=x.toString();let m=!1;for(const{element:t,classArray:e}of E(l)){o<e.length-1&&(m=!0);const n=e[Math.min(o,e.length-1)];n.length>0&&t.setAttribute("class",(t.getAttribute("class")??"")+" "+n)}if(!m)break}return r};function $(t){const e=document.querySelector(`[id=${JSON.stringify(t)}]`);if(null===e)return;const o=e.closest(".unit.frame>svg");if(null!==o)for(let t=0;t<n.length;t++)if(n[t]===o){r(t);break}}const j=async(t,e)=>{const n=!0===t.options.pause,o=document.createElement("ul");let i=document.createElement("ul");o.append(i);let s=0;for(const t of e.context.indexInfoArray){if("heading"!==t.realOrbit||t.index.length>2)continue;const r=document.createElement("li");r.append(await e.compileSTDN(t.unit.children)),r.addEventListener("click",(()=>{$(t.id)})),2!==t.index.length?(i=document.createElement("ul"),o.append(r),o.append(i),s++,n&&s>1&&(i.dataset.slide=r.dataset.slide=`${s}-`)):i.append(r)}return o};var I=e.zN,L=e.mH,C=e.u7,D=e.tR,O=e.Wi,z=e.go,R=e.X0,P=e.t$,_=e.oL,T=e.Fv,F=e.Kl,U=e.XG,X=e._i,Z=e._R,B=e.F2,V=e.$Z,W=e.tC,q=e.Iz,G=e.up;export{I as down,L as extractSlidableElements,C as findUnit,D as findUnits,O as frame,z as go,R as jumpTo,P as left,_ as listen,T as normalize,F as outline,U as parseSlideIndexesStr,X as parseSlideIndexesStrs,Z as parseSlideStr,B as right,V as show,W as stdnToInlinePlainString,q as unitToInlinePlainString,G as up};