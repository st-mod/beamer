var e={650:(e,t)=>{}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};(()=>{function e(t){let n="";for(const o of t)n+="string"!=typeof o?function(t){for(const n of t){const t=e(n);if(t.length>0)return t}return""}(o.children):o;return n}n.d(o,{mH:()=>v,Wi:()=>W,h0:()=>D,oL:()=>f,Kl:()=>j,_R:()=>g}),n(650);const t=["download","href","hreflang","ping","referrerpolicy","rel","target","type"];function i(e){for(const n of e.querySelectorAll("a")){const e=document.createElement("span");for(const{name:o,value:i}of n.attributes)if(!t.includes(o))try{e.setAttribute(o,i)}catch(e){console.log(e)}for(const t of n.childNodes)e.append(t);n.replaceWith(e)}return e}const r=[];let c=0;const s=[];let l=-1;function a(e){c===e&&-1!==l||(s[++l]=c=e,s[l+1]=void 0),r[c].scrollIntoView()}let d=!1;function f(){addEventListener("keydown",(e=>{if(0!==r.length)if("Enter"!==e.key){if(d)return"Escape"===e.key?(d=!1,document.documentElement.classList.remove("showing"),void a(c)):"ArrowUp"===e.key||"PageUp"===e.key?(e.preventDefault(),void a((c-1+r.length)%r.length)):"ArrowDown"===e.key||"PageDown"===e.key?(e.preventDefault(),void a((c+1)%r.length)):"ArrowLeft"===e.key?(e.preventDefault(),void function(){let e=s[l-1];void 0!==e&&(c=e,l--,r[c].scrollIntoView())}()):"ArrowRight"===e.key?(e.preventDefault(),void function(){let e=s[l+1];void 0!==e&&(c=e,l++,r[c].scrollIntoView())}()):void 0}else!function(){for(let e=0;e<r.length;e++){const{top:t,height:n}=r[e].getBoundingClientRect();if(t+n/2>=0){document.documentElement.classList.add("showing"),a(e),d=!0;break}}}()})),addEventListener("scroll",(()=>{d&&function(){for(let e=0;e<r.length;e++){const{bottom:t}=r[e].getBoundingClientRect();if(t>1){a(e);break}}}()}))}function p(e,t){for(const n of t)for(const t of n){if("string"==typeof t)continue;if(t.tag===e)return t;for(const n of Object.keys(t.options)){const o=t.options[n];if("object"==typeof o){const t=p(e,o);if(void 0!==t)return t}}const n=p(e,t.children);if(void 0!==n)return n}}function u(e,t){const n=[];for(const o of t)for(const t of o)if("string"!=typeof t){t.tag===e&&n.push(t);for(const o of Object.keys(t.options)){const i=t.options[o];"object"==typeof i&&n.push(...u(e,i))}n.push(...u(e,t.children))}return n}function m(t){for(const n of t)if(e(n).length>0)return n;return[]}function h(e){const t=[];for(const n of e.trim().split(/\s+/))if(/^\d+-$/.test(n))t[Number(n.slice(0,-1))-1]=!0;else if(/^\d+$/.test(n)){const e=Number(n);t[e-1]=!0,t[e]=void 0}else if(/^\d+-\d+$/.test(n)){const[e,o]=n.split("-",2).map(Number);for(let n=e-1;n<o;n++)t[n]=!0;t[o]=void 0}else if(/^-\d+$/.test(n)){const e=Number(n.slice(1));for(let n=0;n<e;n++)t[n]=!0;t[e]=void 0}return t}function g(e){const t=[],n=[];for(const[,o,i]of e.matchAll(/((?:\^?-?[_a-zA-Z]+[_a-zA-Z0-9-]*\s+)*)([0-9-][0-9-\s]*)(?:\s+|$)/g))t.push(o),n.push(i);const o=function(e){if(0===e.length)return[];const t=e.map(h),n=Math.max(...t.map((e=>e.length)));if(0===n)return[];for(const e of t)if(e.length<n){const t=e[e.length-1];for(let o=e.length;o<n;o++)e[o]=t}return t}(n);if(0===o.length)return[];const i=o[0].length,r=[];for(let e=0;e<i;e++)r[e]=[];for(let e=0;e<o.length;e++){const n=o[e],i=t[e],c=[],s=[];for(const e of i.trim().split(/\s+/)){if(0===e.length){s.push("invisible");break}e.startsWith("^")?s.push(e.slice(1)):c.push(e)}for(let e=0;e<n.length;e++)n[e]?r[e].push(...c):r[e].push(...s)}return r}function v(e){const t=[];for(const n of e.querySelectorAll("[data-slide]")){const e=n.getAttribute("data-slide");if(null===e)continue;const o=g(e);o.length>0&&t.push({element:n,classesArray:o})}return t}function b(e,t){for(;;){for(;null!==e.nextSibling;)e.nextSibling.remove();if(null===e.parentNode||e.parentNode===t)break;e=e.parentNode}}let y,w=1920,x=1080,E=!1;function A(e){return e.endsWith("px")?Number(e.slice(0,-2)):e.endsWith("cm")?96*Number(e.slice(0,-2))/2.54:e.endsWith("mm")?96*Number(e.slice(0,-2))/25.4:e.endsWith("in")?96*Number(e.slice(0,-2)):e.endsWith("pc")?16*Number(e.slice(0,-2)):e.endsWith("pt")?4*Number(e.slice(0,-2))/3:NaN}function N(e){if(e.endsWith(" landscape")){N(e.slice(0,-10).trim());const t=w;return w=x,void(x=t)}if(e.endsWith(" portrait"))return void N(e.slice(0,-9).trim());if("A5"===e)return w=A("148mm"),void(x=A("210mm"));if("A4"===e)return w=A("210mm"),void(x=A("297mm"));if("A3"===e)return w=A("297mm"),void(x=A("420mm"));if("B5"===e)return w=A("176mm"),void(x=A("250mm"));if("B4"===e)return w=A("250mm"),void(x=A("353mm"));if("JIS-B5"===e)return w=A("182mm"),void(x=A("257mm"));if("JIS-B4"===e)return w=A("257mm"),void(x=A("364mm"));if("letter"===e)return w=A("8.5in"),void(x=A("11in"));if("legal"===e)return w=A("8.5in"),void(x=A("14in"));if("ledger"===e)return w=A("11in"),void(x=A("17in"));const[t,n]=e.trim().split(/\s+/,2).map(A);if(isFinite(t)&&t>0){if(w=t,void 0===n)return void(x=t);isFinite(n)&&n>0&&(x=n)}}function L(e){if("string"!=typeof e)return;const t=document.createElement("style");document.head.append(t),N(e),t.textContent=`@page{size:${w}px ${x}px}.unit.frame>svg>foreignObject>div{height:${x}px}.unit.frame .unit.outline.compact{max-height:${7*x/9}px}`}let k,S=[],$=0;const W=async(e,t)=>{E||(E=!0,L(function(e,t,n){const o=function(e,t,n){const o=n[t];return void 0===o?[]:o[e]??[]}("size","frame",n);if(0!==o.length)return o[o.length-1]}(0,0,t.context.tagToGlobalOptions)));const n=p("title",e.children);void 0!==n&&(y=n);const o=u("author",e.children);o.length>0&&(S=o);const i=p("date",e.children);void 0!==i&&(k=i),$++;const c=document.createElement("div");for(let n=0;;n++){const o=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","foreignObject"),s=document.createElement("div"),l=document.createElement("main"),a=document.createElement("footer"),d=document.createElement("div"),f=document.createElement("div"),p=document.createElement("div"),u=document.createElement("div");c.append(o),o.append(i),i.append(s),s.append(l),s.append(a),l.append(await t.compileSTDN(e.children)),a.append(d),a.append(f),a.append(p),a.append(u),r.push(o),o.setAttribute("viewBox",`0 0 ${w} ${x}`),i.setAttribute("width","100%"),i.setAttribute("height","100%");for(const e of S){const n=document.createElement("span"),{abbr:o}=e.options;"string"==typeof o?n.append(new Text(o)):"object"==typeof o?n.append(await t.compileLine(m(o))):n.append(await t.compileLine(m(e.children))),d.append(n)}if(void 0!==y){const{abbr:e}=y.options;"string"==typeof e?f.append(new Text(e)):"object"==typeof e?f.append(await t.compileLine(m(e))):f.append(await t.compileLine(m(y.children)))}if(void 0!==k){const{abbr:e}=k.options;"string"==typeof e?p.append(new Text(e)):"object"==typeof e?p.append(await t.compileLine(m(e))):p.append(await t.compileLine(m(k.children)))}u.textContent=$.toString();let h=!1;const g=l.querySelectorAll(".unit.pause")[n];void 0!==g&&(b(g,l),h=!0);for(const{element:e,classesArray:t}of v(l))n<t.length-1&&(h=!0),e.classList.add(...t[Math.min(n,t.length-1)]);if(!h)break}return c},j=async(e,t)=>{const n=!0===e.options.pause,o=document.createElement("ul");let r,c=0,s=0;for(const e of t.context.indexInfoArray){if("heading"!==e.orbit||e.index.length>2)continue;const l=document.createElement("li"),a=document.createElement("a");l.append(a),a.append(i(await t.compileLine(m(e.unit.children)))),a.href=`#${encodeURIComponent(e.id)}`,2!==e.index.length?(r=document.createElement("ul"),o.append(l),l.append(r),c++,s++,n&&c>1&&(l.dataset.slide=`${c}-`)):void 0!==r&&(r.append(l),s++)}return s>12&&o.classList.add("compact"),s>24&&o.classList.add("very-compact"),o},D=async(e,t)=>{const n=document.createElement("h1");return n.append(await t.compileSTDN(e.children)),n}})();var i=o.mH,r=o.Wi,c=o.h0,s=o.oL,l=o.Kl,a=o._R;export{i as extractSlidableElements,r as frame,c as h0,s as listen,l as outline,a as parseSlideStr};